<!DOCTYPE html>
<html lang="pt-BR">
    
    


    <head itemscope itemtype="https://blog.dyegomaas.com.br/">
    <link href="https://gmpg.org/xfn/11" rel="profile">
    <script type="application/ld+json">
{
    "@context" : "http://schema.org",
    "@type" : "BlogPosting",
    "mainEntityOfPage": {
         "@type": "WebPage",
         "@id": "https:\/\/blog.dyegomaas.com.br\/"
    },
    "articleSection" : "posts",
    "name" : "Code Coverage garante qualidade?",
    "headline" : "Code Coverage garante qualidade?",
    "description" : "Code Coverage é uma métrica útil? Vale a pena buscar 100% de cobertura? Alta cobertura de código garante qualidade? Neste artigo exploro essas e outras questões.",
    "inLanguage" : "pt-BR",
    "author" : {
        "@type": "Person",
        "name": "Dyego Maas"
    }, 
    "creator" : "Dyego Maas",
    "publisher": "Dyego Maas",
    "accountablePerson" : "Dyego Maas",
    "copyrightHolder" : "Dyego Maas",
    "copyrightYear" : "2022",
    "datePublished": "2022-02-03",
    "dateModified" : "2022-02-03",
    "url" : "https:\/\/blog.dyegomaas.com.br\/posts\/code-coverage\/",
    "wordCount" : "1209",
    "keywords" : [ "Testes","unit testing","code coverage","cobertura de codigo","mutation testing","Blog"]
}
</script>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta http-equiv="Cache-Control" content="public" />
<!-- Enable responsiveness on mobile devices -->
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="robots" content="index,follow" />
<meta name="googlebot" content="index,follow" />
<meta name="yandex-verification" content="20d83aeccd3b80c2" />



    

<meta name="author" content="Dyego Maas"/>

<base href="https://blog.dyegomaas.com.br/posts/code-coverage/">
<meta name="generator" content="Hugo 0.82.0" />

    
    
    

<title itemprop="name">Code Coverage garante qualidade? - Blog Dyego Maas</title>
<meta property="description" content="Code Coverage é uma métrica útil? Vale a pena buscar 100% de cobertura? Alta cobertura de código garante qualidade? Neste artigo exploro essas e outras questões." />



    
        
        
    
        
        
    
        
        
    
        
        
    


<meta name="keywords" content="unit-testing,code-coverage,cobertura-de-codigo,mutation-testing" />
<link rel="canonical" href="https://blog.dyegomaas.com.br/posts/code-coverage/" itemprop="url" />
<meta name="url" content="https://blog.dyegomaas.com.br/posts/code-coverage/" />
<meta property="og:site_name" content="Blog - Dyego Maas" />
<meta property="og:title" content="Code Coverage garante qualidade?" />
<meta property="twitter:title" content="Code Coverage garante qualidade?" />
<meta property="og:description" content="Code Coverage é uma métrica útil? Vale a pena buscar 100% de cobertura? Alta cobertura de código garante qualidade? Neste artigo exploro essas e outras questões." />
<meta property="twitter:description" content="Code Coverage é uma métrica útil? Vale a pena buscar 100% de cobertura? Alta cobertura de código garante qualidade? Neste artigo exploro essas e outras questões." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://blog.dyegomaas.com.br/posts/code-coverage/" /><meta property="og:image" content="/posts/code-coverage/img/featured.jpg"/>
<meta property="og:image:secure_url" content="https://blog.dyegomaas.com.br/posts/code-coverage/img/featured.jpg"/>
<meta property="twitter:image" content="https://blog.dyegomaas.com.br/posts/code-coverage/img/featured.jpg"/>

<meta property="article:published_time" content="2022-02-03T00:00:00+00:00" />
<meta property="og:publish_date" content="2022-02-03T00:00:00-1200" name="publish_date" />

<meta property="article:modified_time" content="2022-02-03T00:00:00+00:00" />

<meta property="article:section" content="posts" />

<meta property="article:tag" content="Testes" />

<meta property="article:tag" content="unit testing" /><meta property="article:tag" content="code coverage" /><meta property="article:tag" content="cobertura de codigo" /><meta property="article:tag" content="mutation testing" />


<meta name="theme-color" content="#000000" />
<meta name="msapplication-TileColor" content="#000000" />
<meta name="imagemode" content="force" />
<meta name="coverage" content="Worldwide" />
<meta name="distribution" content="Global" />
<meta name="HandheldFriendly" content="True" />
<meta name="msapplication-tap-highlight" content="no" />
<meta name="apple-mobile-web-app-title" content="Blog - Dyego Maas" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
<meta name="apple-touch-fullscreen" content="yes" />

    


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/zenburn.min.css">









<link rel="stylesheet" href="/scss/hyde-hyde.e5e196df6474bcb74d824774ca3a557d93f6257f2597e57a87872935825da415.css" integrity="sha256-5eGW32R0vLdNgkd0yjpVfZP2JX8ll&#43;V6h4cpNYJdpBU=" crossorigin="anonymous">


<link rel="stylesheet" href="/scss/print.2744dcbf8a0b2e74f8a50e4b34e5f441be7cf93cc7de27029121c6a09f9e77bc.css" integrity="sha256-J0Tcv4oLLnT4pQ5LNOX0Qb58&#43;TzH3icCkSHGoJ&#43;ed7w=" crossorigin="anonymous" media="print">


<link rel="stylesheet" href="/css/custom.69cb553f8fdb841923fb0042f13bb1a617b61a9c30b020d16fa9175995e8c089.css" integrity="sha256-actVP4/bhBkj&#43;wBC8Tuxphe2GpwwsCDRb6kXWZXowIk=" crossorigin="anonymous">
<link rel="stylesheet" href="/css/asciinema-player.08be1bb04c21933f3a86e361c7ee3a41ed8933bcf7aff45463fa970980b7ae40.css" integrity="sha256-CL4bsEwhkz86huNhx&#43;46Qe2JM7z3r/RUY/qXCYC3rkA=" crossorigin="anonymous">


<link rel="stylesheet" href="/scss/hyde-hyde/asciidoctor.2f9054ce19cfdc6b28121b506f34b2e3510ef2c9f179c547220757b9fcc87c3e.css" integrity="sha256-L5BUzhnP3GsoEhtQbzSy41EO8snxecVHIgdXufzIfD4=" crossorigin="anonymous">
<link rel="stylesheet" href="/scss/overrides.cf95d8e5bfb25a5877937f51a4f792cce3f37c6e0f9793bd530cdcfb439e7233.css" integrity="sha256-z5XY5b&#43;yWlh3k39RpPeSzOPzfG4Pl5O9Uwzc&#43;0OecjM=" crossorigin="anonymous">
<link rel="stylesheet" href="/scss/modal.b14275a85eaf0b0c84ad617938e954acde7af88e46a068bd9511b550ab7ecfa6.css" integrity="sha256-sUJ1qF6vCwyErWF5OOlUrN56&#43;I5GoGi9lRG1UKt&#43;z6Y=" crossorigin="anonymous">
<link rel="stylesheet" href="/scss/custom.f8d2fe252d6e06e1e393c7e0b5275ef1d5b69e85989d55909f13f807e2cb4dfc.css" integrity="sha256-&#43;NL&#43;JS1uBuHjk8fgtSde8dW2noWYnVWQnxP4B&#43;LLTfw=" crossorigin="anonymous">




<link rel="stylesheet" href="/scss/tocbot.5ef07cebc3c477b54270456f149ee02922479bb7555fd344b2c69f953b0e7e5e.css" integrity="sha256-XvB868PEd7VCcEVvFJ7gKSJHm7dVX9NEssaflTsOfl4=" crossorigin="anonymous">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/asciinema-player/2.6.1/asciinema-player.min.css" integrity="sha512-tv24MiwP+0CRCL80VsmJYPl/xDD2tdlDMz9fhNCIAQ6UPrj6Kh/57hOt9A4YnoNDKH5QDxJqGhtt9NPW2sgQeg==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <!-- Icons -->
<link rel="shortcut icon" href="/favicons/favicon.ico">
<link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
    
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js" defer></script>
<script src="https://cdn.jsdelivr.net/npm/jquery-match-height@0.7.2/dist/jquery.matchHeight.min.js" defer></script>
<script src="https://unpkg.com/lunr/lunr.min.js" defer></script>
<script src="https://cdn.jsdelivr.net/npm/lunr-languages@1.4.0/min/lunr.stemmer.support.min.js" defer></script>
<script src="https://cdn.jsdelivr.net/npm/lunr-languages@1.4.0/min/lunr.pt.min.js" defer></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mustache.js/4.0.1/mustache.min.js" defer></script>

<script src="/js/layout-adjustments.js" defer></script><script src="/js/custom-search.js" defer></script>

<script async>
  document.onreadystatechange = function () {
    if (document.readyState == "complete") {
      adjustLayout();
      initializeSearch('/search-index.json', '/search-data-companion.json');
   }
 }
</script>
</head>

    <body class=" ">
    
<div class="sidebar">
    <div class="container ">
      <div class="sidebar-about">
        <span class="site__title">
          <a href="https://blog.dyegomaas.com.br/">Blog Dyego Maas</a>
        </span>
        
          
          
          
          <div class="author-image">
            <img src="https://blog.dyegomaas.com.br/img/avatar.png" alt="Author Image" class="img--circle img--headshot element--center">
          </div>
          
        
        
        <p class="site__description">
           Arquiteto de software e Escritor 
        </p>
      </div>
      <div class="collapsible-menu">
        <input type="checkbox" id="menuToggle">
        <label for="menuToggle">Blog Dyego Maas</label>
        <div class="menu-content">
          <div class="menu-container">
	<ul class="sidebar-nav">
		
		
			 
				<li>
					<a href="/">
						<span><i class="fas fa-home"></i> Home</span>
					</a>
				</li>
			
		
			 
				<li>
					<a href="/posts/">
						<span><i class="far fa-newspaper"></i> Artigos</span>
					</a>
				</li>
			
		
			 
				<li>
					<a href="/podcasts/">
						<span><i class="fas fa-microphone"></i> Podcasts</span>
					</a>
				</li>
			
		
			 
				<li>
					<a href="/talks/">
						<span><i class="fas fa-microphone-alt"></i> Talks</span>
					</a>
				</li>
			
		
			 
				<li>
					<a href="/recommendations/">
						<span><i class="fas fa-book"></i> Recomendações</span>
					</a>
				</li>
			
		
			 
				<li>
					<a href="https://dyegomaas.com.br/">
						<span><i class="fas fa-address-card"></i> Dyego Maas</span>
					</a>
				</li>
			
		
		<li>
			<a id="search-button" rel="search" style="cursor: pointer;">
    <i class="fa fa-search" aria-hidden="true"></i> Pesquisar
</a>

<div id="search-results-modal" class="modal display-none">
    
    <div class="modal-content">
      <div class="modal-header">
        <span class="modal-close">&times;</span>
        <h2>O que você procura?</h2>
      </div>
      <div class="modal-body">
        <input type="search" id="search-input" results="10" placeholder="Pesquisar... (pressione Enter)">
        <div>
            <ul id="search-results"></ul>
        </div>
      </div>
      
    </div>
</div>
		</li>
	</ul>
</div>

          <section class="social">
	
	<a href="https://twitter.com/DyegoMaas" rel="me"><i class="fab fa-twitter fa-lg icon-social" aria-hidden="true"></i></a>
	
	
	<a href="https://facebook.com/DyegoAlekssander" rel="me"><i class="fab fa-facebook-f icon-social" aria-hidden="true"></i></a>
	
	
	<a href="https://github.com/Dyegomaas" rel="me"><i class="fab fa-github fa-lg icon-social" aria-hidden="true"></i></a>
	
	
	
	
	
	
	
	<a href="https://linkedin.com/in/dyego-maas" rel="me"><i class="fab fa-linkedin fa-lg icon-social" aria-hidden="true"></i></a>
	
	
	
	
	
	
	
	
	
	<a href="mailto:dyego.maas@gmail.com" rel="me"><i class="fas fa-at fa-lg icon-social" aria-hidden="true"></i></a>
	

	
	 
	
	
	<a href="https://blog.dyegomaas.com.br/index.xml" rel="me"><i class="fas fa-rss fa-lg icon-social" aria-hidden="true"></i></a>
	
</section>
          
<div class="sponsored-image-container">
    
    <img src="" class="sponsored-image">
    
</div>

        </div>
      </div>
      


    </div>
  </div>
  
        <div class="content container">
            
    
<article class="real">
  <header>
    <h1>Code Coverage garante qualidade?</h1>
    
    
<div class="post__meta">
    
    
      <i class="fas fa-calendar-alt"></i>
       <time datetime="2022-02-03">  03


  

  
    Fev, 
  

  

  

  

  

  

  

  

  

  

  


2022 </time>
    
    
    
      
      
          em
          
          
              <a class="badge badge-category" href="/categories/testes">TESTES</a>
              
          
      
    
    
    
      
      
          <br/>
           <i class="fas fa-tags"></i>
          
          <a class="badge badge-tag" href="/tags/unit-testing">unit testing</a>
           
      
          <a class="badge badge-tag" href="/tags/code-coverage">code coverage</a>
           
      
          <a class="badge badge-tag" href="/tags/cobertura-de-codigo">cobertura de codigo</a>
           
      
          <a class="badge badge-tag" href="/tags/mutation-testing">mutation testing</a>
          
      
    
    
    <br/>
    <i class="fas fa-clock"></i> <span>6 min de leitura</span>

    

     

    <div style="text-align:right">
      

















<a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class="twitter-share-button" data-size="large" data-via="DyegoMaas" data-hashtags="unit-testing,code-coverage,cobertura-de-codigo,mutation-testing" data-show-count="false">Tweet</a><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

    </div>
</div>


  </header>
  
  
  
    <div class="toc-wrapper">
      <input type="checkbox" id="tocToggle">
      <label for="tocToggle">
        <i class="fas fa-list-ul"></i>
        <span id="toc-title">Nesta página&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
      </label>
      <div id="toc-toggle-cover"></div>
      
        <nav class="toc" id="TableOfContents"></nav>
      
    </div>
  
  
  <div class="post">
    <div class="paragraph">
<p><strong><em>Code coverage</em> (cobertura de código) é o percentual de código que está coberto por testes automatizados. Essa métrica é medida em todo código que é executado quando os testes rodam. Ela pode nos dar um feedback poderoso, mas também tem suas fragilidades.</strong></p>
</div>
<div class="paragraph">
<p>Neste artigo, vamos explorar vários aspectos do <strong>Code Coverage</strong>, veremos como melhor aplicá-la para obter bons resultados, e também um pouco sobre métricas complementares que ajudam a ganhar confiança nos números obtidos.</p>
</div>
<div class="sect1">
<h2 id="_como_a_métrica_code_coverage_é_calculada"><a class="anchor" href="#_como_a_métrica_code_coverage_é_calculada"></a><a class="link" href="#_como_a_métrica_code_coverage_é_calculada">Como a métrica Code Coverage é calculada?</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>A maioria das ferramentas modernas de análise de cobertura se baseiam em instrumentação de código. Ou seja, analisam as estruturas do código (classes, métodos, declarações, branches).</p>
</div>
<div class="paragraph">
<p>Existem três tipos de análise de cobertura que essas ferramentas geralmente vão realizar:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;"/>
<col style="width: 66.6667%;"/>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>Statements (declarações/comandos)</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Statement coverage mede se cada Statement foi executado durante os testes.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>Branches (ramificações)</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Branch coverage mede se possíveis ramificações nas estruturas de fluxo de controle foram seguidas. Por exemplo, se entrou em cada <code>if/else</code>, ternários, cada opção de <code>switch/case</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>Methods (métodos)</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Method coverage mede se um método chegou a ser executado durante os testes.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Quando uma ferramenta de cobertura de código roda, ela realiza essas três análises e as utiliza para gerar uma métrica composta, que é o <strong>Percentual Total de Cobertura</strong>. Este é o valor apresentado pelas ferramentas.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./img/coverage-forever-factory.jpg" alt="Relatório de cobertura da biblioteca ForeverFactory, mostrando 99% de cobertura de código, incluindo namespaces, classes e métodos"/>
</div>
<div class="title">Figura 1. Relatório de Cobertura da biblioteca ForeverFactory</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Algumas ferramentas, como <code>Cobertura</code> ou <code>Emma</code> geram uma métrica chamada <strong>Line Coverage</strong>. Esse é uma métrica bem simples que mede o número de linhas de código cobertas pelos testes. É oferecida por ferramentas que fazem instrumentação de <em>bytecode</em>. Como elas só tem acesso às classes compiladas, só tem acesso ao número da linha. <strong>A métrica Statement Coverage é bem semelhante, mas com a vantagem de trazer mais informação útil.</strong></p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_quando_code_coverage_é_útil"><a class="anchor" href="#_quando_code_coverage_é_útil"></a><a class="link" href="#_quando_code_coverage_é_útil">Quando Code Coverage é útil?</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Code Coverage é uma métrica importante como parte de um <em>ciclo de feedback</em> no processo de desenvolvimento de software. Os relatórios de cobertura são fundamentais para entender quais partes de um software estão mais cobertas por testes, e quais estão mais vulneráveis. <strong>Então podemos concluir que é sempre útil acompanhar essa métrica.</strong></p>
</div>
<div class="paragraph">
<p>O grau de utilidade da métrica e dos relatórios de cobertura vai depender da nossa capacidade de utilizar essa informação a fim ajudar na tomada de decisões no projeto, e pode variar com base no contexto de cada projeto.</p>
</div>
<div class="paragraph">
<p>Por exemplo, um time que está começando a adotar testes automatizados num projeto legado pode utilizar essa métrica para acompanhar o progresso dos esforços na adoção de práticas de teste, focando num primeiro momento em atingir um percentual de moderado de cobertura, e focando mais em cobrir rótinas críticas específicas.</p>
</div>
<div class="paragraph">
<p>Já um time maduro na escrita de testes automatizados e que mantém um percentual de cobertura razoavelmente alto no seu projeto, pode utilizá-la para garantir que a suíte de testes continua testando bem a aplicação à medida que ela evolui.</p>
</div>
<div class="paragraph">
<p>A análise de cobertura deve ser executada junto com os testes, de forma automatizada, no pipeline de CI do projeto. Desta forma, teremos feedback rápido sobre a evolução dos testes e do projeto. Se o percentual de cobertura diminuir abaixo de um número pré-determinado, podemos inclusivo fazer o build falhar, exigindo que o time escreva mais testes.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./img/code-coverage-chart.jpg" alt="O gráfico mostra uma oscilação no percentual de cobertura, variando de 98% para 88%, e de volta para 98% em algumas semanas"/>
</div>
<div class="title">Figura 2. Evolução da cobertura de código ao longo da vida de um projeto</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_quando_faz_sentido_mirar_100_de_cobertura"><a class="anchor" href="#_quando_faz_sentido_mirar_100_de_cobertura"></a><a class="link" href="#_quando_faz_sentido_mirar_100_de_cobertura">Quando faz sentido mirar 100% de cobertura?</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Cobertura de código costuma seguir a regra do 80-20, ou seja, quanto mais nos aproximamos dos 100% de cobertura, mais difícil se torna aumentar a cobertura. Isso ocorre porque muitas vezes alguns testes básicos conseguem cobrir grande parte do fluxo. Mas para avançar mais adiante na cobertura, serão necessários testes cada vez mais específicos para tratar pequenos cenários alternativos.</p>
</div>
<div class="paragraph">
<p><strong>Projetos de código aberto (<em>open-source</em>) costumam mirar coberturas de 100% ou bem próximas disso</strong>. Isso é importante, porque dezenas ou até milhares de outros aplicações podem depender desse projeto. Então esta é uma situação em que faz bastante sentido mirar números bem altos de cobertura.</p>
</div>
<div class="paragraph">
<p>Para projetos comerciais de código fechado, creio que exceto raras exceções de alta criticidade, não é necessário um índice de cobertura tão alto para colher frutos. <a href="https://testing.googleblog.com/2020/08/code-coverage-best-practices.html">Na Google há um <em>guideline</em> geral de 60% como &#34;aceitável&#34;, &#34;75%&#34; como recomendável, e 90% como &#34;exemplar&#34;.</a> <strong>Minha recomendação nesses casos é mirar 80% de cobertura quando possível.</strong></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_metas_irrealistas"><a class="anchor" href="#_metas_irrealistas"></a><a class="link" href="#_metas_irrealistas">Metas irrealistas</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Deve-se tomar muito cuidado ao definir metas para a Cobertura de Código num projeto de software, especialmente se estiverem atreladas a algum tipo de bônus. Metas pouco realistas podem levar a um <strong>atingimento falso da meta</strong>. <em>Um exemplo de meta pouco realista é atingir 80% de cobertura em seis meses num grande sistema legado com um time que não tem experiência prévia com testes.</em></p>
</div>
<div class="paragraph">
<p><strong>E como é possível atingir a meta sem atingi-la? A resposta é simples: com testes falsos.</strong> Abaixo, temos um exemplo que gera 100% de cobertura sem testar nada.</p>
</div>
<div class="sect2">
<h3 id="_falsa_cobertura_de_código"><a class="anchor" href="#_falsa_cobertura_de_código"></a><a class="link" href="#_falsa_cobertura_de_código">Falsa Cobertura de Código</a></h3>
<div class="listingblock">
<div class="title">Teste que gera 100% de cobertura para o método CalcularJurosSimples, sem testar nada</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-csharp hljs" data-lang="csharp">public class CalcularJurosSimples(float capitalInicial, float taxaJuros, int tempo)
{
  return capitalInicial * (1 + taxaJuros * tempo);
}

[Fact]
public void Deve_calcular_juros_compostos()
{
  var montante = CalcularJurosSimples(1000f, 0.1f, 12);

  // montante.Should().Be(); <i class="conum" data-value="1"></i><b>(1)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tbody><tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Note que nesse caso, a asserção do teste nem chegou a ser implementada. Mesmo sem testar nada, como o método <code>CalcularJurosSimples</code> é invocado durante o teste, o relatório de cobertura vai indicar que está devidamente coberto.</td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock tip">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Infelizmente, esse tipo de coisa acontece por aí, e implica que <strong>atingir um alto percentual de cobertura de testes não significa ter bons testes</strong>. Isso implica que atingir um alto percentual de cobertura de testes não significa ter bons testes.</p>
</div>
<div class="paragraph">
<p>E como saber se nossa suíte de testes está boa? Para ganhar confiança e garantir que ela testa de fato o que precisa ser testado, podemos usar uma contra-métrica chamada Mutation Score, que veremos na próxima seção.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect2">
<h3 id="_mutation_score"><a class="anchor" href="#_mutation_score"></a><a class="link" href="#_mutation_score">Mutation Score</a></h3>
<div class="paragraph">
<p>Mutation Score (ou Escore de Mutação) é uma métrica gerada por ferramentas de Teste de Mutação. <strong>O objetivo dos Testes de Mutação é medir a habilidade de uma suíte de testes identificar problemas no código.</strong> Ela considera que uma boa suíte de testes deve ser capaz de identificar erros introduzidos no código.</p>
</div>
<div class="paragraph">
<p>E como essas ferramentas funcionam? Elas introduzem erros no código da aplicação, e rodam os testes para ver se eles identificam essas <strong>mutações</strong>. Idealmente, para cada mutação introduzida, pelo menos um teste deveria quebrar. Se nenhum teste quebrar, significa que a suíte de testes tem pontos cegos, e precisa de mais testes.</p>
</div>
<div class="paragraph">
<p><strong>Um bom Mutation Score, aliado a um Percentual de Cobertura razoável formam um excelente par de contra-métricas que nos ajudam a atingir qualidade no código e nos testes.</strong></p>
</div>
<div class="paragraph">
<p>Se você quiser conhecer mais sobre testes de mutação, confira meu <a href="/posts/artigo-testes-mutacao-stryker-net">outro artigo, onde falo em detalhes sobre como introduzir testes de mutação em projetos .NET com a ferramenta Stryker.NET</a>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./img/stryker-html-survived.png" alt="Mostra uma mutação que sobreviveu aos testes, indicando a mutação introduzida, que foi trocar um sinal de menor por menor ou igual"/>
</div>
<div class="title">Figura 3. Mutação que sobreviveu aos testes, em relatório do Stryker.NET</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_resumo"><a class="anchor" href="#_resumo"></a><a class="link" href="#_resumo">Resumo</a></h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>100% de cobertura de código faz sentido em projetos <em>open-source</em></p>
</li>
<li>
<p>80% de cobertura de código é suficiente para a maioria dos projetos comerciais</p>
</li>
<li>
<p><a href="https://testing.googleblog.com/2020/08/code-coverage-best-practices.html">Alto percentual de cobertura de testes não garante qualidade</a></p>
</li>
<li>
<p>Testes de Mutação podem complementar a Cobertura de Código, para garantir a qualidade da suíte de testes e da aplicação</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_podcast"><a class="anchor" href="#_podcast"></a><a class="link" href="#_podcast">Podcast</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Também tive a oportunidade de discutir sobre esses tópicos no AmbevTech Talk.</p>
</div>

<iframe src="https://open.spotify.com/embed-podcast/episode/1DQejs2AVZ7cRdpkkZpH9u?theme=black" width="100%" height="232" frameborder="0" allowtransparency="true" allow="encrypted-media"></iframe>

</div>
</div>

  </div>
  <style>
#share-buttons {display: inline-block; vertical-align: middle; }
#share-buttons:after {content: ""; display: block; clear: both;}
#share-buttons > div {
position: relative;
text-align: left;
height: 36px;
width: 32px;
float: left;
text-align: center;
}
#share-buttons > div > svg {height: 16px; fill: #d5d5d5; margin-top: 10px;}
#share-buttons > div:hover {cursor: pointer;}
#share-buttons > div.facebook:hover > svg {fill: #3B5998;}
#share-buttons > div.twitter:hover > svg {fill: #55ACEE;}
#share-buttons > div.linkedin:hover > svg {fill: #0077b5;}
#share-buttons > div.mail:hover > svg {fill: #7D7D7D;}
#share-buttons > div.instagram:hover > svg {fill: #C73B92;}
#share-buttons > div.facebook > svg {height: 18px; margin-top: 9px;}
#share-buttons > div.twitter > svg {height: 20px; margin-top: 8px;}
#share-buttons > div.linkedin > svg {height: 19px; margin-top: 7px;}
#share-buttons > div.mail > svg {height: 14px; margin-top: 11px;}
</style>

<div>
    

















<a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class="twitter-share-button" data-size="large" data-via="DyegoMaas" data-hashtags="unit-testing,code-coverage,cobertura-de-codigo,mutation-testing" data-show-count="false">Tweet</a><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

    <a href="https://twitter.com/DyegoMaas?ref_src=twsrc%5Etfw" class="twitter-follow-button" data-size="large" data-via="DyegoMaas" data-hashtags="teste teste2" data-show-count="false">Follow @DyegoMaas</a><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
</div>



<span style="color: silver;">Outras opções para compartilhar:</span>
<div id="share-buttons">
    <div class="facebook" title="Compartilhe no Facebook" onclick="window.open('http://www.facebook.com/sharer/sharer.php?u=https:\/\/blog.dyegomaas.com.br\/posts\/code-coverage\/', 'sharer', 'width=626,height=436');"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1343 12v264h-157q-86 0-116 36t-30 108v189h293l-39 296h-254v759h-306v-759h-255v-296h255v-218q0-186 104-288.5t277-102.5q147 0 228 12z"/></svg></div>
    <div class="linkedin" title="Compartilhe no Linkedin" onclick="window.open('https://www.linkedin.com/shareArticle?mini=true&url=https:\/\/blog.dyegomaas.com.br\/posts\/code-coverage\/&title=Code Coverage garante qualidade?', 'sharer', 'width=626,height=700');"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M477 625v991h-330v-991h330zm21-306q1 73-50.5 122t-135.5 49h-2q-82 0-132-49t-50-122q0-74 51.5-122.5t134.5-48.5 133 48.5 51 122.5zm1166 729v568h-329v-530q0-105-40.5-164.5t-126.5-59.5q-63 0-105.5 34.5t-63.5 85.5q-11 30-11 81v553h-329q2-399 2-647t-1-296l-1-48h329v144h-2q20-32 41-56t56.5-52 87-43.5 114.5-15.5q171 0 275 113.5t104 332.5z"/></svg></div>
    <div class="mail" title="Compartilhe por Email" onclick="window.open('mailto:?&body=https:\/\/blog.dyegomaas.com.br\/posts\/code-coverage\/');"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1792 710v794q0 66-47 113t-113 47h-1472q-66 0-113-47t-47-113v-794q44 49 101 87 362 246 497 345 57 42 92.5 65.5t94.5 48 110 24.5h2q51 0 110-24.5t94.5-48 92.5-65.5q170-123 498-345 57-39 100-87zm0-294q0 79-49 151t-122 123q-376 261-468 325-10 7-42.5 30.5t-54 38-52 32.5-57.5 27-50 9h-2q-23 0-50-9t-57.5-27-52-32.5-54-38-42.5-30.5q-91-64-262-182.5t-205-142.5q-62-42-117-115.5t-55-136.5q0-78 41.5-130t118.5-52h1472q65 0 112.5 47t47.5 113z"/></svg></div>
</div>
  

<div class="navigation navigation-single">
    
    <a href="/posts/atualizando-basic-computer-games/" class="navigation-prev">
      <i aria-hidden="true" class="fa fa-chevron-left"></i>
      <span class="navigation-tittle">Atualizando o livro mais influente da era BASIC</span>
    </a>
    
    
    <a href="/posts/testes-dotnet-testcontainers/" class="navigation-next">
      <span class="navigation-tittle">Testes de integração melhores usando containers Docker e a biblioteca Testcontainers</span>
      <i aria-hidden="true" class="fa fa-chevron-right"></i>
    </a>
    
</div>


  

  
    
        <div id="disqus_thread"></div>
<script type="text/javascript">
    

    (function () {
    if (location.hostname === "localhost" ||
      location.hostname === "127.0.0.1" ||
      location.hostname === "") {
      return;
    }
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    var disqus_shortname = 'blogdyegomaas';
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || 
      document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>

<noscript>
  Please enable JavaScript to view the
  <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a>
</noscript>
<a href="http://disqus.com/" class="dsq-brlink">comments powered by
  <span class="logo-disqus">Disqus</span>
</a>

    


</article>


        </div>
        
    

  
  
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-111956442-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css" integrity="sha256-h20CPZ0QyXlBuAw7A+KluUYx/3pK+c7lYEpqLTlxjYQ=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/v4-shims.min.css" integrity="sha256-wN7QJaqAwQ03kgUhyN4EU2phRdDkLrQYbFe0EvpQ60U=" crossorigin="anonymous" />

    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/highlight.min.js"></script>
        
    <script type="text/javascript">
        
        hljs.initHighlightingOnLoad();
    </script>
    



<script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.js"></script>
<script type="text/javascript">
  if (tocbot) {
    tocbot.init({
      
      tocSelector: '.toc',
      
      contentSelector: '.post',
      
      headingSelector: 'h2, h3, h4',
      collapseDepth: 4
    });
  }
</script>



    



    </body>
</html>
